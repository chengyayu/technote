# 锁

    数据库锁设计的初衷是处理并发问题。作为多用户共享的资源，当出现并发访问的时候，数据库需要合理地控制资源的访问规则。而锁就是用来实现这些访问规则的重要数据结构。

根据加锁范围划分：
- 全局锁
- 表锁
- 行锁

## 1. 全局锁

1.1 定义

对整个数据库实例加锁。

1.2 指令：

```sql
# 全局读锁
flush tables with read lock;

# 解锁
unlock tables;
```
1.3 应用场景：

**做全库逻辑备份**。全库只读，把整库每个表都 select 出来存成文本。

1.4 问题：

- 如果你在主库上备份，那么在备份期间都不能执行更新，业务基本上就得停摆；
- 如果你在从库上备份，那么备份期间从库不能执行主库同步过来的 binlog，会导致主从延迟。
