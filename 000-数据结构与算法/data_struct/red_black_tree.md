# 红黑树（Red-Black Tree）

## 平衡二叉查找树

二叉查找树在频繁的动态更新过程中，可能会出现树的高度远大于 logn 的情况，从而导致各个操作的效率下降。极端情况下，二叉树会退化为链表，时间复杂度会退化到 O(n)。要解决这个复杂度退化的问题，我们需要设计一种平衡二叉查找树。

平衡二叉树的严格定义是这样的：二叉树中任意一个节点的左右子树的高度相差不能大于 1。平衡二叉查找树既要符合平衡二叉树的特性，又要符合二叉查找树的特性。红黑树并不符合严格定义，但是在工程中，很多用到平衡二叉查找树的地方都会用它。

### 平衡

平衡二叉查找树中“平衡”的意思，其实就是让整棵树左右看起来比较“对称”，不要出现左子树很高、右子树很矮的情况。这样就能让整棵树的高度相对来说低一些，相应的插入、删除、查找等操作的效率高一些。

## 红黑树的定义

红黑树中的节点，一类被标记为黑色，一类被标记为红色。一棵红黑树需要满足这样几个要求：
- 根节点是黑色的；
- 每个叶子节点都是黑色的空节点（NIL），也就是说，叶子节点不存储数据；
- 任何相邻的节点都不能同时为红色，也就是说，红色节点是被黑色节点隔开的；
- 每个节点，从该节点到达其可达叶子节点的所有路径，都包含相同数目的黑色节点；

## 近似平衡

红黑树的高度近似 2logn。红黑树的高度只比高度平衡的 AVL 树的高度（logn）仅仅大了一倍，在性能上，下降得并不多。这样推导出来的结果不够精确，实际上红黑树的性能更好。
